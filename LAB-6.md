# **LAB-6**
**Функции `apply`, `lapply`, `sapply`, `split`**

## **TASK-1**

**Создать матрицу mat с помощью функции `matrix` на базе функции rnorm(50)) с 5 столбцами и 10 строками со случайными данными**
```
mat <- matrix( rnorm(50), ncol=5, nrow=5, byrow=TRUE)
mat
```
```
            [,1]        [,2]        [,3]       [,4]       [,5]
[1,]  0.08256392 -1.32511989  0.65385456  0.7994584 -1.4045165
[2,]  0.79080282  1.11120934  0.28354301 -1.6134028  1.2038055
[3,]  0.89301596 -1.68618479 -0.97966888 -1.1574459 -0.5643490
[4,]  0.97414078 -0.07550195  0.09640771 -0.4436267  1.0706514
[5,] -0.05568204 -2.36982212 -0.33472907  1.7164123  0.2537963
```

## **TASK-2**

**Найти максимальное значение в каждом столбце:**

* Функция `apply(x, 1-или-2, FUNCTION)` - 
возвращает вектор, массив или список значений, полученных путем
применения функции FUNCTION к определенным элементам массива или матрицы x;
Например, если х-матрица, 
то при 1 функция FUNCTION будет применена к каждой строке матрицы, 
а при 2 - к каждому столбцу матрицы

```
a <- apply(mat, 2, max)
a
```
```
[1] 0.9741408 1.1112093 0.6538546 1.7164123 1.2038055
```

## **TASK-3**

**Найти среднее значение для каждого столбца:**
```
b <- apply(mat, 2, mean)
b
```
```
[1]  0.53696829 -0.86908388 -0.05611853 -0.13972093  0.11187754
```

## **TASK-4**

**Найти минимальное значение в каждой строке:**
```
c<- apply(mat, 1, min)
c
```
```
[1] -1.4045165 -1.6134028 -1.6861848 -0.4436267 -2.3698221
```

## **TASK-5**

**Отсортировать каждый столбец таблицы (от наименьшего к большему значению):**
```
d<- apply(mat, 2, sort)
d
```
```
            [,1]        [,2]        [,3]       [,4]       [,5]
[1,] -0.05568204 -2.36982212 -0.97966888 -1.6134028 -1.4045165
[2,]  0.08256392 -1.68618479 -0.33472907 -1.1574459 -0.5643490
[3,]  0.79080282 -1.32511989  0.09640771 -0.4436267  0.2537963
[4,]  0.89301596 -0.07550195  0.28354301  0.7994584  1.0706514
[5,]  0.97414078  1.11120934  0.65385456  1.7164123  1.2038055
```

## **TASK-6**

**Найти кол-во значений < 0 для для каждого столбца (использовать свою функцию):**
```
e<- apply(mat, 2, function(x)
                  sum(x<0))
e
```
```
[1] 1 4 2 3 2
```

## **TASK-7**

**Вывести вектор з булевими значениями - TRUE и FALSE. TRUE - если в столбце есть элементы >2, FALSE – если нет** 
```
f<- apply(mat, 2, function(x)
                  any(x > 2))
f
```
```
[1] FALSE FALSE FALSE FALSE FALSE
```

## **TASK-8**

**Создать список: list1 <- list(observationA = c(1:5, 7:3), observationB = matrix(1:6, nrow=2))** 
```
list1 <- list(observationA = c(1:5, 7:3), observationB = matrix(1:6, nrow=2))
list1
```
```
$`observationA`
 [1] 1 2 3 4 5 7 6 5 4 3

$observationB
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
```

**Для этого списка найти sum с помощью функции `lapply`:**

* Функция `lapply(х, FUNCTION = ...)`
возвращает список той же длины, что и х; 
При этом значения в новом списке будут результатом применения функции FUNCTION 
к элементам исходного объекта х

```
g1 <- lapply(list1, sum)
g1
```
> Или можно написать свою функцию суммы:
```
g2 <- lapply(list1, function(x)
                    sum(x))
g2
```
```
$`observationA`
[1] 40

$observationB
[1] 21
```

## **TASK-9**

**Для каждого элемента списка list1 найдите максимальное и минимальное значение (range) с помощью функций `lapply` та `sapply`**

* Функция `lapply(х, FUNCTION = ...)`
возвращает СПИСОК той же длины, что и х; 
При этом значения в новом списке будут результатом применения функции FUNCTION 
к элементам исходного объекта х

* Функция `sapply(х, FUNCTION = ...)`
возвращает ВЕКТОР той же длины, что и х; 
При этом значения в новом списке будут результатом применения функции FUNCTION 
к элементам исходного объекта х
```
k1 <- lapply(list1, range)
k1
```
```
$`observationA`
[1] 1 7
$observationB
[1] 1 6
```
```
k2 <- sapply(list1, range)
k2
```
```
observationA observationB
[1,]            1            1
[2,]            7            6
```

## **TASK-10**

**Для встроенного набора данных InsectSprays найти среднее count для каждого spray**

```
СПРАВКА:
Набор данных (data frame) - InsectSprays - получен в ходе эксперимента по изучению эффективности 
6 видов инсектицидных средств. 
Каждым из этих средств обработали по 12 растений, 
после чего подсчитали количество выживших на растениях насекомых. 
Данные этого эксперимента входят в состав стандартного набора данных R.

ОПИСАНИЕ InsectSprays:
В таблице InsectSprays есть 2 столбца:
1. - count, который содержит результаты подсчета насекомых
2. - spray, который содержит коды инсектицидных средств (от А до F):
```

> Выведем данный фрейм:

``` 
l<-data.frame(InsectSprays)
l
```
```
     count spray
1     10     A
2      7     A
3     20     A
4     14     A
5     14     A
6     12     A
7     10     A
8     23     A
9     17     A
10    20     A
11    14     A
12    13     A
13    11     B
14    17     B
15    21     B
16    11     B
17    16     B
18    14     B
19    17     B
20    17     B
21    19     B
22    21     B
23     7     B
24    13     B
25     0     C
26     1     C
27     7     C
28     2     C
29     3     C
30     1     C
31     2     C
32     1     C
33     3     C
34     0     C
35     1     C
36     4     C
37     3     D
38     5     D
39    12     D
40     6     D
41     4     D
42     3     D
43     5     D
44     5     D
45     5     D
46     5     D
47     2     D
48     4     D
49     3     E
50     5     E
51     3     E
52     5     E
53     3     E
54     6     E
55     1     E
56     1     E
57     3     E
58     2     E
59     6     E
60     4     E
61    11     F
62     9     F
63    15     F
64    22     F
65    15     F
66    16     F
67    13     F
68    10     F
69    26     F
70    26     F
71    24     F
72    13     F
```

> Разобьем данный фрейм по кодам инсектицидных средств (от А до F):

* Функция `split(x, FUNCTION = ...)` - разбивает данные вектора или дата фрейма х в соответствии с функцией FUNCTION
```
m <- split(InsectSprays, InsectSprays$spray)
m
```
```
$`A`
   count spray
1     10     A
2      7     A
3     20     A
4     14     A
5     14     A
6     12     A
7     10     A
8     23     A
9     17     A
10    20     A
11    14     A
12    13     A

$B
   count spray
13    11     B
14    17     B
15    21     B
16    11     B
17    16     B
18    14     B
19    17     B
20    17     B
21    19     B
22    21     B
23     7     B
24    13     B

$C
   count spray
25     0     C
26     1     C
27     7     C
28     2     C
29     3     C
30     1     C
31     2     C
32     1     C
33     3     C
34     0     C
35     1     C
36     4     C

$D
   count spray
37     3     D
38     5     D
39    12     D
40     6     D
41     4     D
42     3     D
43     5     D
44     5     D
45     5     D
46     5     D
47     2     D
48     4     D

$E
   count spray
49     3     E
50     5     E
51     3     E
52     5     E
53     3     E
54     6     E
55     1     E
56     1     E
57     3     E
58     2     E
59     6     E
60     4     E

$F
   count spray
61    11     F
62     9     F
63    15     F
64    22     F
65    15     F
66    16     F
67    13     F
68    10     F
69    26     F
70    26     F
71    24     F
72    13     F
```

> Найдем среднее значение count для каждого spray - с помощью функций `lapply` и `sapply` 
> (результат будет одинаковый, а представление - разное):

```
n <- lapply(m, function(x) 
               mean(x$count))
n
```
```
$`A`
[1] 14.5

$B
[1] 15.33333

$C
[1] 2.083333

$D
[1] 4.916667

$E
[1] 3.5

$F
[1] 16.66667
```
```
o <- sapply(m, function(x) 
               mean(x$count))
o
```
```
A         B         C         D         E         F 
14.500000 15.333333  2.083333  4.916667  3.500000 16.666667 
```
